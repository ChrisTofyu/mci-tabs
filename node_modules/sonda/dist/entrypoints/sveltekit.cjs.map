{"version":3,"file":"sveltekit.cjs","names":["options: Partial<FrameworkUserOptions>"],"sources":["../../src/entrypoints/sveltekit.ts"],"sourcesContent":["import Sonda from './rollup';\nimport type { PluginOption } from 'vite';\nimport type { FrameworkUserOptions } from '../types';\n\nexport default function SondaSvelteKitPlugin( options: Partial<FrameworkUserOptions> = {} ): PluginOption {\n  if ( options.enabled === false ) {\n    return { name: 'sonda' };\n  }\n\n  options.format ??= 'html';\n  options.filename ??= `sonda-report-[env].${ options.format }`;\n\n  // SvelteKit runs few builds and each must generate a separate report\n  if ( !options.filename.includes( '[env]' ) ) {\n    throw new Error( 'SondaSvelteKitPlugin: The \"filename\" option must include the \"[env]\" token.' );\n  }\n\n  return {\n    apply: 'build',\n\n    configResolved( config ) {\n      const env = config.build.ssr ? 'server' : 'client';\n      const generateForServer = options.server ?? false;\n\n      if ( env === 'server' && !generateForServer ) {\n        options.enabled = false;\n      }\n\n      options.filename = options.filename!.replace( '[env]', env );\n    },\n\n    ...Sonda( options )\n  };\n}\n"],"mappings":";;;;;AAIe,SAAS,qBAAsBA,UAAyC,CAAE,GAAiB;AACxG,KAAK,QAAQ,YAAY,MACvB,QAAO,EAAE,MAAM,QAAS;AAG1B,SAAQ,WAAW;AACnB,SAAQ,cAAc,qBAAsB,QAAQ,OAAQ;AAG5D,MAAM,QAAQ,SAAS,SAAU,QAAS,CACxC,OAAM,IAAI,MAAO;AAGnB,QAAO;EACL,OAAO;EAEP,eAAgB,QAAS;GACvB,MAAM,MAAM,OAAO,MAAM,MAAM,WAAW;GAC1C,MAAM,oBAAoB,QAAQ,UAAU;AAE5C,OAAK,QAAQ,aAAa,kBACxB,SAAQ,UAAU;AAGpB,WAAQ,WAAW,QAAQ,SAAU,QAAS,SAAS,IAAK;EAC7D;EAED,GAAG,iCAAO,QAAS;CACpB;AACF"}
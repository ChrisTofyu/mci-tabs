import "../src.mjs";
import { SondaRollupPlugin } from "../rollup.mjs";

//#region src/entrypoints/sveltekit.ts
function SondaSvelteKitPlugin(options = {}) {
	if (options.enabled === false) return { name: "sonda" };
	options.format ??= "html";
	options.filename ??= `sonda-report-[env].${options.format}`;
	if (!options.filename.includes("[env]")) throw new Error("SondaSvelteKitPlugin: The \"filename\" option must include the \"[env]\" token.");
	return {
		apply: "build",
		configResolved(config) {
			const env = config.build.ssr ? "server" : "client";
			const generateForServer = options.server ?? false;
			if (env === "server" && !generateForServer) options.enabled = false;
			options.filename = options.filename.replace("[env]", env);
		},
		...SondaRollupPlugin(options)
	};
}

//#endregion
export { SondaSvelteKitPlugin as default };
//# sourceMappingURL=sveltekit.mjs.map